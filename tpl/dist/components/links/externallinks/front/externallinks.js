define("/tpl/dist/components/links/externallinks/front/externallinks",["coms/frontbase","lib/utils/comUtils","lib/zepto-plugin/touch","lib/zepto-plugin/selector"],function(t,e,i){"use strict";var n=t("coms/frontbase"),a=t("lib/utils/comUtils"),r=t("lib/zepto-plugin/touch"),r=t("lib/zepto-plugin/selector"),s=a.isMobile();return{init:function(t,e,i){var a=this,s=new n(t.attrs,e),l=/&quot;/g;s.data.innerHTML&&l.test(s.data.innerHTML)&&(s.data.innerHTML=s.data.innerHTML.replace(l,"")),s.init(t);var c=t.data,o=r(s.curDom);o.find(".c-externallinks").css({borderRadius:2*parseFloat(t.attrs.borderRadius)+"px",borderWidth:2*parseFloat(t.attrs.borderWidth)+"px"});var d=o.find(".linkOpen");if(d.length)if("javascript:;"==c.multilink){var p=o.find("#linkUrl").val();d.attr("href",p)}else{var u=o.find(".m-weixinShareLayer img").attr("src");d.bind("click",function(){u&&a.popLayer(o,{imgSrc:u})})}else this.dispatchEvent(o,c,i);return s},dispatchEvent:function(t,e,i){var n=this,l=t.find(".link"),c=e.curRedirectType;switch(c){case 1:l.attr("href",l.attr("address")||e.address),l.bind("touchstart",function(t){t.preventDefault()}),l.bind(s?"tap":"click",function(t){a.setPageHash(i._pageData.pageIndex),window.location.href=r(this).attr("address")});break;case 2:l.attr("href","tel:"+l.attr("phone")||e.phone);break;case 3:l.bind("touchstart",function(t){t.preventDefault()}),l.bind(s?"tap":"click",function(e){n.popLayer(t,{})});break;case 4:l.bind("touchstart",function(t){t.preventDefault()}),l.bind(s?"tap":"click",function(t){i._filpPage.go(e.redirectIndex)})}},popLayer:function(t,e){var i=r(".g-externallinks-maskLayer");if(!i.length){var i=r('<div class="g-externallinks-maskLayer z-hide"><img/></div>'),n=r(r(".appbody").length?".appbody":"body");n.append(i),i.on(s?"tap":"click",function(){i.addClass("z-hide")})}var a=e.imgSrc||t.find(".c-externallinks.content").attr("src");i.removeClass("z-hide");var l=i.find("img");l.attr("src",a)}}});